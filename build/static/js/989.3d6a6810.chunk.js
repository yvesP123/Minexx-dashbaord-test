/*! For license information please see 989.3d6a6810.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkminexx_dashboard=self.webpackChunkminexx_dashboard||[]).push([[989],{98989:(e,s,a)=>{a.r(s),a.d(s,{default:()=>k});var n=a(72791),l=a(1444),t=a(91752),c=a(69532),o=a(47022),i=a(89743),r=a(2677),d=a(3593),m=a(91398),h=a(17612),x=a(57689),p=a(75985),u=a(79100);const j=(0,u.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),g=(0,u.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),f=(0,u.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var y=a(72457),N=a(74087),b=a(6088),v=a(23197),w=a(80184);const k=e=>{let{language:s}=e;const{id:a}=(0,x.UO)(),u=(0,x.s0)(),[k,Z]=(0,n.useState)(""),[C,S]=(0,n.useState)(0),[z,D]=(0,n.useState)(0),[F,I]=(0,n.useState)([]),[P,A]=(0,n.useState)([]),[E,L]=(0,n.useState)([]),[M,_]=(0,n.useState)([]),[B,G]=(0,n.useState)(!0),[U,K]=(0,n.useState)(!0),[O,R]=(0,n.useState)(!0),[T,q]=(0,n.useState)(!0),[H,V]=(0,n.useState)(!0),[J,W]=(0,n.useState)(!1),[Y,Q]=(0,n.useState)(""),[X,$]=(0,n.useState)(!1),ee=localStorage.getItem("_dash")||"3ts";(0,n.useEffect)((()=>{a&&se(a)}),[a,s]);const se=async e=>{try{K(!0),R(!0),q(!0),V(!0);const s=await fetch("".concat(v.Bc,"kyc/login/").concat(e),{method:"GET"});if(!s.ok)throw new Error("Network response was not ok for company details");const a=await s.json();Z(a.company.name),console.log("Name of Company",a.company.name),K(!1),console.log("Company Data",a);const n=await fetch("".concat(v.Bc,"documentsnoAuth/").concat(e),{method:"GET",headers:{"x-platform":ee}});if(!n.ok)throw new Error("Network response was not ok for documents");const l=await n.json(),{documents:t,progress:c,totalDocuments:o,missingDocuments:i}=l.documents;I(t),S(c),A(i),D(o),R(!1),console.log("Missing Documents",i),console.log("Company Document Data",l)}catch(s){console.error("Error fetching company data:",s),K(!1),R(!1),q(!1),V(!1),p.Am.error("Failed to load company data. Please try again.")}},ae=()=>(0,w.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,w.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,w.jsx)("span",{className:"visually-hidden",children:"Loading..."})})});return(0,w.jsxs)("div",{className:"row",children:[(0,w.jsxs)("div",{className:"row page-titles mt-4 mb-3 w-100",children:[(0,w.jsx)("div",{className:"col-lg-8 col-md-7 col-sm-6",children:(0,w.jsx)("div",{className:"d-flex align-items-center",children:(0,w.jsxs)("h3",{className:"text-primary mb-0",children:[k&&"".concat(k," - "),(0,w.jsx)("span",{className:"text-dark",children:"KYC Documents"})]})})}),(0,w.jsx)("div",{className:"col-lg-4 col-md-5 col-sm-6 d-flex justify-content-end align-items-center",children:k&&(0,w.jsxs)(l.Z,{children:[(0,w.jsx)(l.Z.Toggle,{variant:"light",id:"dropdown-company",className:"d-flex align-items-center bg-transparent border-0",children:(0,w.jsxs)("div",{className:"d-flex align-items-center",children:[(0,w.jsx)("div",{className:"bg-primary rounded-circle d-flex justify-content-center align-items-center me-2",style:{width:"40px",height:"40px"},children:(0,w.jsx)(j,{size:20,color:"white"})}),(0,w.jsx)("div",{className:"me-2 d-none d-md-block",children:(0,w.jsx)("h5",{className:"mb-0 text-truncate",style:{maxWidth:"150px"},children:k})}),(0,w.jsx)(g,{size:16})]})}),(0,w.jsx)(l.Z.Menu,{align:"end",children:(0,w.jsxs)(l.Z.Item,{onClick:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("user_info"),localStorage.removeItem("_dash"),u("/login")},className:"d-flex align-items-center",children:[(0,w.jsx)(f,{size:18,className:"me-2"}),"Logout"]})})]})})]}),(0,w.jsxs)(t.Z.Container,{defaultActiveKey:"documents",children:[(0,w.jsx)("div",{className:"col-xl-12",children:(0,w.jsx)("div",{className:"card",children:(0,w.jsx)("div",{className:"card-body px-4 py-3 py-md-2",children:(0,w.jsx)("div",{className:"row align-items-center",children:(0,w.jsx)("div",{className:"col-sm-12 col-md-7",children:(0,w.jsx)(c.Z,{as:"ul",className:"nav nav-pills review-tab",role:"tablist",children:(0,w.jsx)(c.Z.Item,{as:"li",className:"nav-item",children:(0,w.jsx)(c.Z.Link,{className:"nav-link px-2 px-lg-3",to:"#documents",role:"tab",eventKey:"documents",children:"Documents"})})})})})})})}),(0,w.jsx)("div",{className:"col-xl-12 col-xxl-12",children:(0,w.jsx)(t.Z.Content,{children:(0,w.jsx)(t.Z.Pane,{eventKey:"documents",id:"documents",children:(0,w.jsx)("div",{className:"card",children:(0,w.jsx)("div",{className:"card-body",children:O?(0,w.jsx)(ae,{}):F.length>0||P.length>0?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(o.Z,{fluid:!0,className:"mt-3",children:(0,w.jsxs)(i.Z,{className:"align-items-center",children:[(0,w.jsx)(r.Z,{xs:"auto",children:(0,w.jsxs)("div",{className:"d-flex align-items-baseline",children:[(0,w.jsx)("span",{style:{fontSize:"2.5rem"},className:"fw-bold",children:"KYC Progress: "}),(0,w.jsxs)("span",{style:{fontSize:"2.5rem"},className:"text-primary fw-bold",children:[" ",C]}),(0,w.jsx)("span",{style:{fontSize:"1.8rem"},className:"ms-1",children:"%"})]})}),(0,w.jsx)(r.Z,{children:(0,w.jsx)(d.Z,{now:C,variant:"primary",style:{height:"1.5rem"}})})]})}),F.length>0&&(0,w.jsxs)("div",{className:"mt-4",children:[(0,w.jsx)("h4",{className:"mb-3",children:"Completed Documents"}),(0,w.jsx)(m.Z,{children:F.map(((e,s)=>(0,w.jsxs)(m.Z.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,w.jsxs)("span",{className:"accordion-body",children:[e.type," ",(0,w.jsx)(y.Z,{color:"green",size:24})]}),(0,w.jsxs)("div",{className:"mt-3 d-flex gap-2",children:[(0,w.jsx)("a",{target:"_blank",className:"btn btn-info",href:"https://drive.google.com/file/d/".concat(e.file,"/preview"),rel:"noreferrer",children:"View"}),(0,w.jsx)("a",{target:"_blank",className:"btn btn-primary",href:"https://drive.usercontent.google.com/download?id=".concat(e.file,"&export=download&authuser=0"),rel:"noreferrer",children:"Download"})]})]},s)))})]}),P.length>0&&(0,w.jsxs)("div",{className:"mt-4",children:[(0,w.jsx)("h4",{className:"mb-3",children:"Required Documents"}),(0,w.jsx)(m.Z,{children:P.map(((e,s)=>(0,w.jsxs)(m.Z.Item,{className:"d-flex justify-content-between align-items-center",children:[(0,w.jsxs)("span",{className:"accordion-body",children:[e," ",(0,w.jsx)(N.Z,{color:"red",size:24})]}),(0,w.jsx)("div",{className:"mt-3 d-flex gap-2",children:(0,w.jsx)("button",{onClick:()=>(Q(e),void W(!0)),className:"btn btn-danger",children:"Upload"})})]},s)))})]})]}):(0,w.jsx)("p",{className:"text-center fs-5 py-4",children:"No documents found for this company."})})})})})})]}),(0,w.jsxs)(h.Z,{show:J,onHide:()=>!X&&W(!1),centered:!0,size:"lg",backdrop:"static",keyboard:!X,"aria-labelledby":"upload-modal",className:"file-upload-modal",children:[(0,w.jsx)("button",{className:"btn btn-link position-absolute",style:{top:"15px",right:"20px",zIndex:10},onClick:()=>!X&&W(!1),children:(0,w.jsx)(b.Z,{color:"white",size:24})}),(0,w.jsx)(h.Z.Body,{className:"p-4 text-center",style:{backgroundColor:"#2c3038",color:"white",borderRadius:"12px"},children:(0,w.jsxs)("div",{className:"d-flex flex-column align-items-center justify-content-center",children:[(0,w.jsx)("div",{className:"mb-4",children:(0,w.jsx)("div",{className:"upload-icon-container",style:{backgroundColor:"rgba(0, 194, 255, 0.2)",borderRadius:"12px",padding:"20px",width:"130px",height:"130px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,w.jsx)("div",{style:{backgroundColor:"#00C2FF",borderRadius:"8px",padding:"15px",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,w.jsx)("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,w.jsx)("path",{d:"M12 20V4M12 4L18 10M12 4L6 10",stroke:"#002138",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})})}),(0,w.jsx)("h2",{className:"mb-3",children:"Please choose the file you would like to upload"}),(0,w.jsx)("p",{className:"text-info mb-4",children:"Only PNG, PDF and JPG files with a max size of 2mb"}),X?(0,w.jsxs)("div",{className:"py-3",children:[(0,w.jsx)("div",{className:"spinner-border text-info",role:"status",children:(0,w.jsx)("span",{className:"visually-hidden",children:"Uploading..."})}),(0,w.jsx)("p",{className:"mt-3",children:"Uploading document, please wait..."})]}):(0,w.jsxs)("div",{className:"file-input-container",children:[(0,w.jsx)("label",{htmlFor:"file-upload",className:"btn btn-info btn-lg px-5",style:{backgroundColor:"#00C2FF",borderColor:"#00C2FF"},children:"Browse"}),(0,w.jsx)("input",{type:"file",id:"file-upload",className:"d-none",accept:".png,.jpg,.jpeg,.pdf",onChange:async e=>{const s=e.target.files[0];if(!s)return;const n=s.type;if(["image/png","image/jpeg","application/pdf"].includes(n))if(s.size>2097152)p.Am.error("File size must be less than 2MB");else try{$(!0),p.Am.info("Uploading ".concat(Y,"..."));const e=new FormData;e.append("file",s),e.append("documentType",Y);const n=await fetch("https://upload-p7n5ing2cq-uc.a.run.app/?companyId=".concat(a),{method:"POST",headers:{"x-platform":ee},body:e});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to upload file")}await n.json();W(!1),$(!1),p.Am.success("".concat(Y," uploaded successfully")),a&&se(a)}catch(l){console.error("Error uploading file:",l.message),$(!1),p.Am.error(l.message||"Failed to upload file")}else p.Am.error("Only PNG, JPG and PDF files are allowed")}})]}),(0,w.jsx)("div",{className:"document-type-container mt-4 p-3 w-100",style:{backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"8px"},children:(0,w.jsx)("div",{className:"text-center",children:Y})})]})})]})]})}}}]);
//# sourceMappingURL=989.3d6a6810.chunk.js.map